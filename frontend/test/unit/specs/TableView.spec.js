import Vue from 'vue'
import sinon from 'sinon'
import TableView from '@/components/TableView'

Vue.config.ignoredElements = [
  'gmap-map', 'gmap-info-window', 'md-button', 'md-toolbar', 'gmap-marker'
];

describe('TableView.spec.js', () => {
  let cmp, vm

  beforeEach(() => {
    cmp = Vue.extend(TableView)
    vm = new cmp({propsData: {
      malwareData: [{id: 1}]
    }
    }).$mount()
  })

  test('Verify malware data', () => {
    expect(vm.malwareData[0].id).toEqual(1)
  })

  test('Row data is malware data', () => {
    expect(vm.rowData[0].id).toEqual(1)
  })

  test('filter changed', () => {
    vm.filterChanged()
  })

  it('Destroyed', done => {
    const getWindowWidth = sinon.stub(vm, 'getWindowWidth')
    const removeEventStub = sinon.stub(window, 'removeEventListener')
    vm.$destroy()
    expect(removeEventStub)
    done()
  })
})
