package com.marklasater.malware.service.impl;

import com.mashape.unirest.http.JsonNode;
import mockit.Tested;
import org.junit.Assert;
import org.junit.Test;

import java.util.HashMap;

public class HttpServiceImplTest {

    @Tested
    HttpServiceImpl httpService;

    @Test
    public void testGetJson(){
        JsonNode jsonNode = httpService.getJson("http://ip-api.com/json/8.8.8.8", new HashMap<>());
        Assert.assertNotNull(jsonNode);
        Assert.assertEquals("8.8.8.8", jsonNode.getObject().get("query"));
    }

    @Test
    public void testGetString(){
        String response = httpService.getString("http://ip-api.com/json/8.8.8.8", new HashMap<>());
        Assert.assertNotNull(response);
    }

    @Test
    public void testGetJson_fail() {
        JsonNode jsonNode = httpService.getJson("http://failfailfailfail.com", new HashMap<>());
        Assert.assertNotNull(jsonNode);
    }

    @Test
    public void testGetString_fail(){
        String response = httpService.getString("http://failfailfailfail.com", new HashMap<>());
        Assert.assertEquals("", response);
    }
}
